{% extends 'base.html' %}
{% load static  %}

{% block title %} Admin | {{request.user}} {% endblock title %}

{% block content %}
<!-- Side navigation -->
<div class="sidenav">
    {% if user.userprofile.profile_pic %}
    <img class="profile_image" src="{{user.userprofile.profile_pic.url}}" alt="Maxwell Admin">
    {% else %}
    <img class="profile_image" src="{% static 'todo/images/default.jpg' %}" alt="Maxwell Admin">

    {% endif %}
    <p class="float-left ml-5 mt-2 text-white font-weight-bold">{{ context.my_user.username }}</p>
    <hr class="mt-5 border border-info">
<!--    <form method="POST" id="select"> {% csrf_token %}-->
<!--        <select id="user_todo"-->
<!--                class="form-select btn-block form-select-lg mb-3 bg-secondary" aria-label="User select">-->
<!--            <option selected disabled>Choose one user</option>-->
<!--            {% for user in context.users %}-->
<!--            <option class="btn&#45;&#45;pill" value="{{user.id}}"><a href="#"> {{user.username}} {{user.id}}</a></option>-->
<!--            {% endfor %}-->
<!--        </select>-->
<!--    </form>-->

     <a class="text-decoration-none" href="{% url 'change_password' %}">Change Password</a>
    <a href="{% url 'edit_user' %}" class="text-decoration-none"> Update Profile </a>

    <div class="button_end">
        <a class="btn btn-secondary btn-block font-weight-bold text-info " href="{% url 'logout' %}"
           role="button">Logout</a>
    </div>
</div>

<br>

<div class="row">
    <div class="col-lg-12">
        <div class="main-todo-input-wrap">
            <form method="post" id="todo_form" action="{% url 'add_admin_todo' %}"> {% csrf_token %}
                <div class="main-todo-input fl-wrap">
                    <div class="main-todo-input-item">
                        {{context.form.field}}
                        <!--                        {{context.form.user}}-->
                    </div>

                    <button class="add-items main-search-button" id="add">ADD</button>
                </div>

                <select name="user_todo" class="user-select btn-block" aria-label="User select"
                        class="">
                    <option selected disabled value="choose">Choose one user</option>
                    {% for user in context.users %}
                    <option class="btn--pill" value="{{user.id}}"> {{user.username}}</option>
                    {% endfor %}
                </select>

            </form>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="main-todo-input-wrap">
            <div class="main-todo-input fl-wrap todo-listing">
                <ul class="list-items ml-3">
                    {% for user in context.users%}
                    <li class="font-weight-bold text-dark">{{user.username}}</li>
                    {% for item in context.items %}
                    {% if user.id == item.user_id %}
                    <ul id="list-items">
                        <li class="ml-2">
                            {% if item.field %}
                            {{item.field}}
                            {% elif not item.field %}
                            <p>Nothing todo... </p>
                            {% endif %}
                            <a href="{% url 'delete' item.id %}" class="btn btn-danger float-right ml-2">Delete</a>
                            <a href="{% url 'edit' item.id %}" class="btn btn-secondary float-right">Edit</a><br><br>
                        </li>
                    </ul>
                    {% endif %}
                    {% endfor %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block javascript %}
<script>
    var button = document.getElementById('add');
    if (button.clicked == true) {
        alert("clicked");
        var select = document.getElementById('user_todo');
        if (!select.value) {
            document.getElementById('user_todo').focus();
            alert("Please! select user.")
        }
    }
</script>
{% endblock javascript %}
